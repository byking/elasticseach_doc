# 基本概念

介绍关于elasticsearch的一些核心概念。理解这些概念有助于学习elasticsearch。

## Near Realtime(NRT)

elasticsearch是一个近乎实时的检索平台。

## Cluster

集群是节点的集合, 所有数据分布在集群中的各个节点, 通过集群可以操作所有节点来建索引或查数据。
集群用一个唯一名字标识, 默认是`elasticsearch`。

确保在不同的环境中使用的集群名字不同, 否则节点会加入错误的集群。

集群可以只有一个节点，但是多个不同的集群也必须通过唯一的集群名称来区别。

## Node

节点存储数据，并参与到集群的建索引和查询中。
和集群一样，节点也是用名字来区分，这个名字默认是启动时候生成的全局唯一表示(UUID)。
可以修改默认的节点名称。
一个节点可以通过配置名字来加入到一个集群中，节点启动在可以互相发现其他节点的情况下默认会加入
名为elasticsearch的集群。

## Index

索引是有相同特点的文档的集合，例如可以建立一个用户数据的索引，一个产品目录的索引或者一个订单数据的索引。
索引用名字来标识（小写），通过这名字可以完成对文档的检索、更新。
在一个集群中，索引数量没有限制。

## Type

在一个索引中可以定义多个类型，类型是索引的逻辑分类或者分片。一般来说，一种类型的文档都有共同的字段。
例如：现在有个一个博客平台，我们要存储它的所有数据到一个索引。在这个索引中，你可以定义用户数据类型、
博客数据类型和评论数据类型。

## Document

文档是可以被检索的基本数据单元。例如：文档可以是一个用户的数据、一个产品的数据、一个订单的数据。文档格式采用JSON。
在个索引的类型中，存放的文档数量没有限制。在索引中的文档必须有个类型。

## Shards & Replicas

一个索引存的数据可能会超过硬件的限制。例如：一个存放了十亿文档的索引占用了1TB磁盘空间，这个索引在一个节点上，
这时候一个索引检索可能会很慢。
为了解决这个问题，elasticsearch提供了分片的功能：将索引分成很多片，分布在多个节点上。当你建立一个索引的时候，你可以定义分片的数量。
分片很重要：

- 可以水平扩容。
- 可以提高性能和吞吐量，请求会分布到多个分片。

分片的分布和数据的聚合都有elasticsearch管理，对用户透明。

如果预期故障会经常发生（分片/节点故障），可以开启故障转移的功能。

副本的功能很重要：

- 提供高可用服务，即使在分片/节点故障的时候，因此副本分片不能和主分片分配在一个节点上。
- 提高了可以检索的量，因为可以并发的检索多个副本。

总之，每个索引都可以分配到多个分片中。一个索引也可以没有副本。一旦分片，就有一个主分片。一个索引分片和副本的数量在索引建立的时候定义。
索引建立后，可以随意改变索引副本的个数，但是不能改索引分片的数量。

默认情况下，每个索引在elasticsearch中都会有5个主分片和一个副本，就是说如果有两个节点，该索引就会有5个主分片和5个副本分片（一个完整的副本），
那么每个索引总共有十个分片。
